{% extends "base.html" %}

{% load web_filters %}

{% block content %}
<section class="row align-items-center">
    <section class="col-auto mr-auto">
        <h1 style="display: inline;">第 {{ index|add:1 }} 題 - {{ question.type|readable_question_type }}</h1>
    </section>

    <div class="w-100 my-3"></div>

    <section class="col">
        <div class="card">
            <div class="card-body">
                <form class="pt-2" action="/practice/{{ practice.id }}/take/{{ index }}" method="post">
                    {% csrf_token %}
                {% if question.type is 1 %}
                    {% include 'management/question/qa/display_alone.html' with question=question show_answer=False selected_answer=selected_answer %}
                {% elif question.type is 2 %}
                    {% include 'management/question/short_conversation/display_alone.html' with question=question show_answer=False selected_answer=selected_answer %}
                {% elif question.type is 3 %}
                    {% include 'management/question/grammar/display_alone.html' with question=question show_answer=False selected_answer=selected_answer %}
                {% elif question.type is 4 %}
                    {% include 'management/question/phrase/display_alone.html' with question=question show_answer=False selected_answer=selected_answer %}
                {% elif question.type is 5 %}
                    {% include 'management/question/paragraph_understanding/display_alone.html' with question=question show_answer=False selected_answer=selected_answer %}
                {% endif %}
                    <input type="hidden" name="id" value="{{ index }}" />

                    <section class="row mt-3">
                        <div class="col">
                        {% if has_next and not all_answered %}
                            <button class="btn btn-primary">下一題</button>
                        {% else %}
                            <button class="btn btn-success">結束練習</button>
                        {% endif %}
                        </div>

                        <div class="col-auto">
                            {% for answer in answers %}
                                {% if forloop.counter0|divisibleby:10 %}
                                {% if forloop.first %}
                                <ul class="pagination mb-0 d-flex justify-content-end">
                                {% else %}
                                </ul>
                                <ul class="pagination mt-3 mb-0 d-flex justify-content-end">
                                {% endif %}
                                {% endif %}
                                    <li class="page-item {% if forloop.counter0 == index %}active{% endif %}">
                                        <a class="page-link {% if answer >= 0 and forloop.counter0 != index %}bg-success text-light{% endif %}" href="/practice/{{ practice.id }}/take/{{ forloop.counter0 }}">
                                            {{ forloop.counter }}
                                        </a>
                                    </li>
                                {% if forloop.last %}
                                </ul>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </section>
                </form>
            </div>
        </div>
    </section>
</section>
{% endblock %}
