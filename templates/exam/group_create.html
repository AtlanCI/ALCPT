{% extends "base.html" %}

{% load web_filters %}

{% block content %}

<head>
    <style>
        #container {
            width: 70%;
            min-width: 310px;
            max-width: 70%;
            height: 400px;
            margin: 0 auto
        }
        #pt {
            margin: 2px;
            height: 29px;
            border: none;
            background: transparent;
            line-height: 29px;
        }
        .bm{
            margin-bottom: 5px;
            border: 1px solid #CDCDCD;
            background: #FFF;
        }
        .cl{
            zoom: 1;
        }
        #pt .z{
            padding-right: 10px;
            float: left;
        }
    </style>
</head>

<script type="text/javascript">
    function check_all(obj,cName)
    {
        var checkboxs = document.getElementsByName(cName);
        for(var i=0;i<checkboxs.length;i++){checkboxs[i].checked = obj.checked;}
    }
</script>


<section class="row align-items-center">
    <section class="col-auto mr-auto">
        <div id="pt" class="bm c1">
            <div class="z">
                <a class="fa fa-home fa-2x" href="http://127.0.0.1:8000/" ></a>
                <a class="fa fa-angle-double-right fa-lg box"></a>
                <a href="/exam" style="font-size: 18px">考試管理員</a>
                <a class="fa fa-angle-right fa-lg"></a>
                <a href="#" style="font-size: 18px">受測者群組建立</a>
            </div>
            <div style="padding-right: 10px"></div>
        </div>
        <h1 style="display: inline;">受測者群組建立</h1>
    </section>

    <div class="w-100 my-3"></div>

    <div class="w-100 my-3"></div>

    <section class="col">
        <div class="card">
            <div class="card-body">
                <form action="/score" method="get">
                    <div class="row">
                        <select class="custom-select col-2" name="department">
                            <option value="0">所有學系</option>
                            {% for dept in departments %}
                            <option value="{{ dept.id }}" {% if dept.id == keywords.dept_id %} selected {% endif %}>{{ dept.name }}</option>
                            {% endfor %}
                        </select>
                        <div class="col-2">
                            <input type="number" class="form-control" name="grade" value="{{ keywords.grade }}" placeholder="年班">
                        </div>
                        <div class="col-2">
                            <select class="custom-select" name="squadron">
                                <option value="0">所有中隊</option>
                                {% for squa in squadrons %}
                                <option value="{{ squa.id }}" {% if squa.id == keywords.squa_id %} selected {% endif %}>{{ squa.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col">
                            <input type="text" class="form-control" name="name" value="{{ keywords.name }}" placeholder="學號/姓名">
                        </div>
                        <div class="col-auto">
                            <button type="submit" class="btn btn-primary" style="background-color: #1b98e0; color: white">搜尋</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <div class="w-100 my-3"></div>

    <section class="col-12">

        <table class="table table-striped table-hover table-responsive-lg">
            <thead>
                <tr>
                    <th class="align-middle text-center col-xs-1"><input type="checkbox" name="all" onclick="check_all(this,'c')" /> 全選</th>
                    <th class="align-middle text-center col-xs-3">#</th>
                    <th class="align-middle text-center col-xs-2">學生名稱</th>
                    <th class="align-middle text-center col-xs-3">系別</th>
                    <th class="align-middle text-center col-xs-2">中隊</th>
                    <th class="align-middle text-center col-xs-1">年班</th>

            </thead>
            {% if students %}
                {% for student in students %}
                <tr>
                    <th class="align-middle text-center"><input type="checkbox" name="c" value="{{ student.id }}"></th>
                    <td scope="row" class="align-middle text-center">{{ student.id }}</td>
                    <td class="align-middle text-center">{{ student.user.name }}</td>
                    <td class="align-middle text-center">{{ student.department.name }}</td>
                    <td class="align-middle text-center">{{ student.squadron.name }}</td>
                    <td class="align-middle text-center">{{ student.grade }}</td>
                </tr>
                {% endfor %}
            {% else %}
                <h2>目前暫無資料！</h2>
            {% endif %}
        </table>

        <div style="text-align: center">
            <button style="width: 7%; background-color: #1b98e0; color: white" type="submit" class="btn" >建立</button>
            <button style="width: 7%"  class="btn btn-default">取消</button>
        </div>

    </section>
</section>
{% endblock %}
